"use strict";const button=document.querySelector(".js_btn"),resetButton=document.querySelector(".js_resetbtn"),eraseButton=document.querySelector(".js_erasebtn"),userInput=document.querySelector(".js_input"),series=document.querySelector(".js_series"),favoritesHtml=document.querySelector(".js_favorites"),imageNull="https://via.placeholder.com/210x295/ffffff/666666/?text=TV.";let seriesData=[],favorites=[];function apiInfo(){const e=userInput.value;fetch("//api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{seriesData=e,paintSeries(),setInLocalStorage()})}function isClicked(e){return void 0!==favorites.find(t=>t.show.id===e.show.id)}function paintSeries(){let e="",t="";for(const s of seriesData){t=!0===isClicked(s)?"clicked":"",e+=`<li class="js_serie main__shows--series__li ${t}" id="${s.show.id}">`,null===s.show.image?e+=`<img src="${imageNull}" alt="" />`:e+=`<img src="${s.show.image.medium}" alt="" >`,e+=`<h3>${s.show.name}</h3>`,e+="</li>"}series.innerHTML=e,listenshows()}function listenshows(){const e=document.querySelectorAll(".js_serie");for(const t of e)t.addEventListener("click",handleListSeries)}function handleListSeries(e){const t=parseInt(e.currentTarget.id),s=seriesData.find(e=>e.show.id===t);console.log(t),console.log(s),console.log(favorites);const o=favorites.findIndex(e=>e.show.id===t);-1===o?favorites.push(s):favorites.splice(o,1),paintSeries(),paintFavorites(),setInLocalStorage()}function paintFavorites(){favoritesHtml.innerHTML="";let e="";console.log(favorites);for(const t of favorites)e+=`<li class="js_favorite main__shows--favorites__li" id="${t.show.id}">`,e+=' <input\n    type="button"\n    value="x"\n    class="main__paint--favorites__erase js_erasebtn"\n  />',null===t.show.image?e+=`<img src="${imageNull}" alt="" />`:e+=`<img src="${t.show.image.medium}" alt="" >`,e+=`<h3>${t.show.name}</h3>`,e+="</li>",favoritesHtml.innerHTML=e;listenshows()}function setInLocalStorage(){const e=JSON.stringify(favorites);localStorage.setItem("favorites",e)}function getLocalStorage(){const e=localStorage.getItem("favorites");if(null===e)apiInfo();else{const t=JSON.parse(e);favorites=t,paintFavorites()}}function eraseAllFavorites(){favorites=[],localStorage.removeItem(favorites)}document.querySelector(".js_form").addEventListener("submit",e=>{e.preventDefault()}),button.addEventListener("click",apiInfo),getLocalStorage(),resetButton.addEventListener("click",eraseAllFavorites);